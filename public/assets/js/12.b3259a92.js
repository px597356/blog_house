(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{415:function(t,s,a){"use strict";a.r(s);var e=a(2),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"webpack第五节"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack第五节"}},[t._v("#")]),t._v(" webpack第五节")]),t._v(" "),s("h2",{attrs:{id:"处理js资源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#处理js资源"}},[t._v("#")]),t._v(" 处理js资源")]),t._v(" "),s("p",[t._v("js 资源 Webpack 不是已经处理过了吗，为什么我们还要处理呢？")]),t._v(" "),s("p",[t._v("原因是 Webpack 对 js 处理是有限的，只能编译 js 中 ES 模块化语法，不能编译其他语法，导致 js 不能在 IE 等浏览器运行，所以我们希望做一些兼容性处理。")]),t._v(" "),s("p",[t._v("其次开发中，团队对代码格式是有严格要求的，我们不能用肉眼去检测代码格式，需要使用专业的工具来检测。")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("针对 js 兼容性处理，我们用 Babel 来完成")])]),t._v(" "),s("li",[s("p",[t._v("针对代码格式，我们使用 Eslint 来完成")])])]),t._v(" "),s("p",[t._v("我们先完成 Eslint，检测代码格式无误后，再由 Babel 做代码兼容性处理。")]),t._v(" "),s("h2",{attrs:{id:"eslint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eslint"}},[t._v("#")]),t._v(" Eslint")]),t._v(" "),s("p",[t._v("可组装的 JavaScript 和 JSX 检查工具。")]),t._v(" "),s("p",[t._v("它是用来检测 js 和 jsx 语法的工具，可以配置各项功能。")]),t._v(" "),s("p",[t._v("我们是用 Eslint，关键是写 Eslint 配置文件，里面写上各种 rules 规则，将来运行 Eslint 时就会以写的规则对代码进行检查。")]),t._v(" "),s("h3",{attrs:{id:"_1-配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-配置文件"}},[t._v("#")]),t._v(" 1.配置文件")]),t._v(" "),s("p",[t._v("配置文件有很多种写法：")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v(".eslintrc.")]),t._v("*：新建文件，位于项目根目录")]),t._v(" "),s("ul",[s("li",[s("code",[t._v(".eslintrc")])]),t._v(" "),s("li",[s("code",[t._v(".eslintrc.js")])]),t._v(" "),s("li",[s("code",[t._v(".eslintrc.json")])]),t._v(" "),s("li",[t._v("区别在于配置格式不一样")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("package.json")]),t._v(" 中 "),s("code",[t._v("eslintConfig")]),t._v(" ：不需要创建文件，在原有文件基础上写")])])]),t._v(" "),s("p",[s("code",[t._v("Eslint")]),t._v(" 会查找和自动读取它们，所以以上配置文件只需要存在一个即可")]),t._v(" "),s("h3",{attrs:{id:"_2-具体配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-具体配置"}},[t._v("#")]),t._v(" 2.具体配置")]),t._v(" "),s("p",[t._v("我们以 "),s("code",[t._v(".eslintrc.js")]),t._v(" 配置文件为例：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 解析选项")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("parserOptions")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 具体检查规则")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rules")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 继承其他规则")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 其他规则详见: https://eslint.bootcss.com/docs/user-guide/configuring")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"_1-parseroptions-解析选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-parseroptions-解析选项"}},[t._v("#")]),t._v(" 1.parserOptions 解析选项")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("parserOptions")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("ecmaVersion")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ES 语法版本")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sourceType")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"module"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ES模块化")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("ecmaFeatures")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ES 其他特性")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("jsx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果是 React 项目，就需要开启 jsx 语法")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"_2-rules-具体规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-rules-具体规则"}},[t._v("#")]),t._v(" 2.rules 具体规则")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("“off”")]),t._v(" 或   "),s("code",[t._v("0")]),t._v("  - 关闭规则")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("“warn”")]),t._v(" 或 "),s("code",[t._v("1")]),t._v("  - 开启规则，使用警告级别的错误："),s("code",[t._v("warn")]),t._v("（不会导致程序退出）")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("“error”")]),t._v(" 或  "),s("code",[t._v("2")]),t._v("  - 开启规则，使用错误级别的错误，"),s("code",[t._v("error")]),t._v("（当被触发时，程序会退出）")])])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("rules："),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tsemi：“error”"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 禁止使用分号")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'array-callback-return'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'warn'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 强制数组方法的回调函数中有 return 语句，否则警告")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'default-case'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'warn'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 要求 switch 语句中有 default 分支，否则警告")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("commentPattern")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'^no default$'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 允许在最后注释 no default，就不会有警告了")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("eqeqeq")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'warn'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 强制使用 === 和 !==, 否则警告")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'smart'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// http://eslint.bootcss.com/docs/rules/eqeqeq#smart 除了少数情况下不会有警告")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("更多规则详见："),s("a",{attrs:{href:"http://eslint.bootcss.com/docs/rules/",target:"_blank",rel:"noopener noreferrer"}},[t._v("规则文档"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"_3-extends-继承"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-extends-继承"}},[t._v("#")]),t._v(" 3."),s("code",[t._v("extends")]),t._v(" 继承")]),t._v(" "),s("p",[t._v("开发中一点点写 rules 规则太费劲了，所以有更好的办法，继承现有的规则。")]),t._v(" "),s("p",[t._v("现有以下较为有名的规则：")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://eslint.bootcss.com/docs/rules/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Eslint 官方的规则"),s("OutboundLink")],1),t._v("："),s("code",[t._v("eslint: recommended")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue Cli 官方的规则"),s("OutboundLink")],1),t._v("："),s("code",[t._v("plugin: vue/essential")])]),t._v(" "),s("p",[t._v("React Cli 官方的规则:  "),s("code",[t._v("react-app")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 例如在 React 项目中, 我们可以这样写配置")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-app"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rules")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 我们的规则会覆盖掉 React-app 的规则")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 所以想要修改规则直接改就行")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("eqeqeq")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"warn"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"smart"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);